<p></p>

<form class="io-form-body" [formGroup]="action?.formControls()">

    <div style="width: 100%; padding-left: 20px; padding-right: 20px">
    <!-- KONTEN DATA PRIBADI-->
    <!-- <input type="file" (change)="onFileSelected($event)> -->
    <table style="width: 100%">

    <!-- NAMA LENGKKAP -->
    <tr>
        <td style="width: 20%">Nama Lengkap<span style="color: red">*</span></td>

        <td style="width: 5px">:</td>
        <td style="width: 80%">
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" formControlName="sdm_name" name="sdm_name" required>
                <mat-hint *ngIf="action.formErrors.sdm_name" [ngStyle]="{'color': 'red'}">
                {{action.formErrors.sdm_name}}
                </mat-hint>
            </mat-form-field>
        </td>
        <td rowspan="7">
            <div style="margin-left: 50px">
                <!-- <img mat-card-image style="width: 200px" src="http://www.personalbrandingblog.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640-300x300.png" alt="Photo of a Shiba Inu"><br> -->
                <div *ngFor="let fileUrl of imageFiles">
                    <img style="width: 200px" [src]="fileUrl" (error)="this.imageUrl='http://www.personalbrandingblog.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640-300x300.png'" alt="Profil Photo"><br />
                </div>
                <div *ngIf="pathFoto && !imageFiles">
                    <img src="{{pathFoto}}" style="width: 200px">
                </div>
                <label>Browse Image <span style="color:red">*</span> </label>
                <!-- <input id="singleFile" type="file"> -->
                <!-- <input type="file" #Image accept="image/*" (change)="handleFileInput($event)" formControlName="sdm_image" name="sdm_image"> -->
                <input #uploadFile id="files" type="file"
                        ng2FileSelect [uploader]="uploaderFoto"
                        title="Ukuran File Maksimal 500kb"
                        (change)="handleFileInput($event)" (click)="clearUploaderFoto()" accept=".jpg,.png,.jpeg,.img" required>
            </div>
        </td>
    </tr>

    <!-- NIK -->
    <tr>
        <td >NIK <span style="color:red">*</span> </td>
        <td >:</td>
        <td >
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" formControlName="sdm_nik" name="sdm_nik" [readonly]="true" pattern="^([0-9]{0,})$" required>
                <!-- <mat-hint *ngIf="action.formErrors.sdm_nik" [ngStyle]="{'color': 'red'}">
                    {{action.formErrors.sdm_nik}}
                </mat-hint> -->
            </mat-form-field>
        </td>
    </tr>
    <!-- NO KTP -->
    <tr>
        <td>No. KTP <span style="color:red">*</span> </td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput (keypress)="numberOnly($event)" placeholder="" maxlength="16" formControlName="sdm_ktp" name="sdm_ktp" required>
                <mat-hint *ngIf="action.formErrors.sdm_ktp" [ngStyle]="{'color': 'red'}">
                {{action.formErrors.sdm_ktp}}
                </mat-hint>
            </mat-form-field>
        </td>
    </tr>

    <!-- Jenis Kelamin -->
    <tr>
        <td style="padding: 10px; padding-left: 0px">Jenis Kelamin</td>
        <td style="padding: 10px;"> </td>
        <td style="padding: 10px;">
            <mat-radio-group class="margin-field" formControlName="gender_id" name="gender_id" >
                <mat-radio-button value="1">Laki-laki</mat-radio-button>
                <mat-radio-button value="2" style="margin-left: 15px;">Perempuan</mat-radio-button>
            </mat-radio-group>
        <td></td>
    </tr>
    <!-- Tempat Lahir -->
    <tr>
        <td>Tempat Lahir</td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" formControlName="sdm_placebirth" name="sdm_placebirth">
            </mat-form-field>
        </td>
    </tr>

    <!-- tanggal lahir -->
    <tr>
        <td class="td1">Tanggal Lahir<span style="color: red">*</span></td>
        <td class="td2">:</td>
        <td class="td3">
            <mat-form-field class="sdw-full-size">
                <input matInput [readonly]="true" [max]="maxDate" [matDatepicker]="picker" placeholder="" (click)="picker.open()" formControlName="sdm_datebirth" required>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker startview="year" [startAt]="mulaiDari"></mat-datepicker>
            </mat-form-field>
        </td>
    </tr>

    <!-- Alamat -->
    <tr>
        <td>Alamat <span style="color:red">*</span> </td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size"  >
            <textarea matInput matTextareaAutosize placeholder="" formControlName="sdm_address" required></textarea>
            </mat-form-field>
        </td>
    </tr>

    <!-- KODE POS -->
    <tr>
        <td>Kode POS</td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" (keypress)="numberOnly($event)" maxlength="5" formControlName="sdm_postcode" name="sdm_postcode">
                <mat-hint *ngIf="action.formErrors.sdm_postcode" [ngStyle]="{'color': 'red'}">
                {{action.formErrors.sdm_postcode}}
                </mat-hint>
            </mat-form-field>
        </td>
    </tr>

    <!-- NO TELEPON -->
    <tr>
        <td>No. Telepon <span style="color:red">*</span> </td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput (keypress)="numberOnly($event)" placeholder="" maxlength="13" formControlName="sdm_phone" name="sdm_phone" required>
            </mat-form-field>
        </td>
    </tr>

    <!-- EMAIL -->
    <tr>
        <td>Email<span style="color:red">*</span></td>
        <td>:</td>
        <td>
            <div class="example-container">
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" formControlName="sdm_email" name="sdm_email" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required>
                <!-- <mat-error *ngIf="email.invalid">{{getErrorMessage()}}</mat-error> -->
            </mat-form-field>
            </div>
        </td>
    </tr>

    <!-- LINKED IN -->
    <tr>
        <td>LinkedIn</td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" formControlName="sdm_linkedin" name="sdm_linkedin" >
                </mat-form-field>
        </td>
    </tr>

    <!-- AGAMA -->
    <tr>
        <td>Agama<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <mat-select placeholder="" formControlName="religion_id" name="religion_id" required>
                <!-- <mat-option></mat-option> -->
                <mat-option *ngFor="let lov of lovReligion.data" [value]="lov.key">
                    {{lov.value}}
                </mat-option>
                </mat-select>
            </mat-form-field>
        </td>
    </tr>

    <!-- KESEHATAN -->
    <tr>
        <td>Kesehatan<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <mat-select placeholder="" formControlName="health_id" name="health_id" required>
                <mat-option *ngFor="let lov of lovHealth.data" [value]="lov.key">
                    {{lov.value}}
                </mat-option>
                </mat-select>
            </mat-form-field>
        </td>
    </tr>

    <!-- OBJECTIF -->
    <tr>
        <td>Objektif</td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput placeholder="" formControlName="sdm_objective" name="sdm_objective">
                </mat-form-field>
        </td>
    </tr>

    <!-- LEVEL -->
    <tr>
        <td>Level<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <mat-select placeholder="" formControlName="sdmlvl_id" name="sdmlvl_id" required>
                <mat-option *ngFor="let lov of lovLevel.data" [value]="lov.key">
                    {{lov.value}}
                </mat-option>
                </mat-select>
            </mat-form-field>
        </td>
    </tr>

    <!-- STATUS -->
    <tr>
        <td>Status<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <mat-select placeholder="" formControlName="contracttype_id" *ngIf="edit == false" name="contracttype_id" required>
                    <mat-option *ngFor="let lov of lovStatus.data" [value]="lov.key">
                        {{lov.value}}
                    </mat-option>
                </mat-select>

                <mat-select placeholder="" formControlName="contracttype_id" *ngIf="edit == true" name="contracttype_id" required>
                    <mat-option *ngFor="let lov of statusContract" [value]="lov.key">
                        {{lov.values.contracttypes_contracttype_name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </td>
    </tr>
<!--                 <mat-option *ngFor="let lov of statusContract" [value]="lov.key" *ngIf="edit == true">
                    {{lov.value}}
                </mat-option> -->

    <!-- PENEMPATAN -->
    <tr>
        <td>Penempatan <span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-radio-group class="margin-field" formControlName="sdm_contractloc" name="sdm_contractloc" required>
                <mat-radio-button value="1">Bandung</mat-radio-button>
                <mat-radio-button value="2">Luar Bandung</mat-radio-button>
            </mat-radio-group>
        </td>
    </tr>

    <!-- AWAL KONTRAK -->
    <tr>
        <td>Awal Kontrak<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput [readonly]="true" [matDatepicker]="pickerStartDate" (click)="pickerStartDate.open();" placeholder="" formControlName="sdm_startcontract" required>
                <mat-datepicker-toggle matSuffix [for]="pickerStartDate"></mat-datepicker-toggle>
                <mat-datepicker #pickerStartDate></mat-datepicker>
                </mat-form-field>
        </td>
    </tr>
   
    <!-- AKHIR KONTRAK -->
    <tr *ngIf="form==1">
        <td>Akhir Kontrak<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput [readonly]="true" [min]="this.action.getFormControlValue('sdm_startcontract')" [disabled]="this.action.getFormControlValue('sdm_startcontract') ? null : true" [matDatepicker]="pickerEndDate" (click)="pickerEndDate.open()" placeholder="" formControlName="sdm_endcontract" required>
                <mat-datepicker-toggle matSuffix [for]="pickerEndDate"></mat-datepicker-toggle>
                <mat-datepicker #pickerEndDate></mat-datepicker>
                </mat-form-field>
        </td>
    </tr>
    <!-- AKHIR KONTRAK -->
    <tr *ngIf="form==2">
        <td>Akhir Kontrak<span style="color: red">*</span></td>
        <td>:</td>
        <td>
            <mat-form-field class="sdw-full-size">
                <input matInput [readonly]="true" [min]="this.action.getFormControlValue('sdm_startcontract')" [matDatepicker]="pickerEndDate" (click)="pickerEndDate.open()" placeholder="" formControlName="sdm_endcontract" required>
                <mat-datepicker-toggle matSuffix [for]="pickerEndDate"></mat-datepicker-toggle>
                <mat-datepicker #pickerEndDate></mat-datepicker>
                </mat-form-field>
        </td>
    </tr>

    <tr *ngIf="editDev < 8">
        <td style="padding: 10px; padding-left: 0px;">Posisi <span style="color: red">*</span></td>
        <td style="padding: 10px;"> </td>
        <td style="padding: 10px;">
            <mat-radio-group [disabled]="this.action.getFormControlValue('sdm_startcontract') ? null : true" class="margin-field" name="posisi">
                <mat-radio-button value="01" required (click)="generateNik('01')">Non - Teknis</mat-radio-button>
                <mat-radio-button value="02" required (click)="generateNik('02')" style="margin-left: 15px;">Teknis (Sofware Developer)</mat-radio-button>
            </mat-radio-group>
        </td>
    </tr>

    </table>
    </div>
    <!-- <div class="col-md-3" *ngIf=" form == 2 ">
        <io-form-action [action]="action"></io-form-action>
    </div> -->
    <div style="margin-bottom:16px; margin-left:700px;">
      <button mat-flat-button class="btn-new btn-ww" (click)="onSave()" *ngIf=" form == 1 " [disabled]="action?.formControls()?.invalid || action?.formControls()?.pristine">
        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Save</button>
      <!-- <button mat-flat-button class="btn-new btn-ww" (click)="onUpdate()" *ngIf=" form == 2 " [disabled]="action?.formControls()?.pristine || action?.getFormControlValue('sdm_name')=='' || action?.getFormControlValue('sdm_nik')=='' || action?.getFormControlValue('sdm_ktp')=='' || action?.getFormControlValue('sdm_datebirth')=='' || action?.getFormControlValue('sdm_address')=='' || action?.getFormControlValue('sdm_phone')=='' || action?.getFormControlValue('religion_id')=='' || action?.getFormControlValue('health_id')=='' || action?.getFormControlValue('sdmlvl_id')=='' || action?.getFormControlValue('contracttype_id')=='' || action?.getFormControlValue('sdm_contractloc')=='' || action?.getFormControlValue('sdm_startcontract')=='' || action?.getFormControlValue('sdm_endcontract')=='' || action?.getFormControlValue('sdm_email')==''">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Update</button> -->
        <button mat-flat-button class="btn-new btn-ww" (click)="onUpdate()" *ngIf=" form == 2 " [disabled]="action?.formControls()?.pristine || action?.formControls()?.invalid">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Update</button>
      <button mat-flat-button class="btn-clear btn-ww" [routerLink]="['/pages/sdm/SDM003']">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Cancel</button>
    </div>
</form>